<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.12">
<title>Transformations of Integer Triangles</title>
<link href='favicon.ico' rel='shortcut icon' type='image/x-icon'>
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
<meta name="author" content="Peter Luschny">
<meta name="copyright" content="Copyright(c) 2021 by Peter Luschny">
<meta name="abstract" content="Transformations of integer triangles">
<meta name="keywords" content="OEIS">
<meta name="date" content="2021-12-12">
<style>
        @media all {
            }

        @media print {

            #symbol {
                display: none;
            }

            #restart {
                display: none;
            }
        }

        body {
            padding: 0px 0px 8px 0px;
            margin: 0px;
            color: #2f3332;
            font-weight: normal;
            background: #1E4D2B;
        }

        pre.srccode {
            font-family: 'Source Code Pro', Consolas, monospace;
            color: white;
            background: linear-gradient(#187ED2, #1B89E2);
            border: 1px solid #5d910b;
            border-radius: 2px;
            box-shadow: inset 0px 1px 0px rgba(255, 255, 255, 0.3), 0px 3px 7px rgba(0, 0, 0, 0.7);
            background-color: #93bd20;
            padding: 10px;
            line-height: 16px;
            font-size: 14px;
            font-weight: 500;
            display: inline-block;
            width: 96%;
        }

        pre.emph {
            font-family: 'Source Code Pro', Consolas, monospace;
            color: blue;
            background: linear-gradient(#d21875, #e21b1b);
            border: 1px solid #5d910b;
            border-radius: 2px;
            box-shadow: inset 0px 1px 0px rgba(255, 255, 255, 0.3), 0px 3px 7px rgba(0, 0, 0, 0.7);
            background-color: #93bd20;
            padding: 10px;
            line-height: 18px;
            font-size: 14px;
            font-weight: 800;
            display: inline-block;
            width: 96%;
        }

        code {
        	color:orange;
        	font-size: 16px;
        }

        h1 {
            background: -webkit-gradient(linear,left top,left bottom,from(#fff),to(#efefef));
            border-radius: 10px;
            box-shadow: 0 0 4px;
            width: 100%;
            border: 1px solid grey;
            padding: 1em;
            box-sizing: border-box;
            margin-top: 5px;
            margin-bottom: 5px;
            text-align: center;
            background: brown;
            color: white;
            letter-spacing: 2px;
            font-weight: bold;
        }

        a:link {
            color: dodgerblue;
            font-weight: 400;
            text-decoration: none;
        }
		h2 {
    		color: rgb(184,26,77);
    		letter-spacing: 1px;
		}
        a:visited {
            color: dodgerblue;
            font-weight: 400;
            text-decoration: none;
        }

        button:focus {
            outline: 0 !important;
        }

        button {
            background: #1E4D2B;
            border: none;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            box-shadow: none;
            color: #ffcc00;
        }

        .main {
            margin: 0px auto;
            width: 480px;
            text-align: justify;
            line-height: 1.5;
            font-family: 'Open Sans', 'Segoe UI', sans-serif;
            background: #2f3332;
            color: white;
        }

        table.center {
            margin-left:auto;
            margin-right:auto;
        }
    </style>
<!-- cssswitcher -->
<script>
    var now = "0"
    function toggleStyle() {
        var m = document.getElementsByClassName("main")[0]
        var f = document.getElementsByClassName("formula")
        var s = document.getElementById("symbol")
        var i2 = document.getElementById("I2");
        var i3 = document.getElementById("I3");
        var o = document.getElementById("outline");
        if (now == "1") {
            now = "0";
            for (var i = 0; i < f.length; i++) {
                f[i].style.color = "#ffcc00";
            }
            m.style.background = "#1E4D2B"; 
            s.style.background = "#1E4D2B";
            m.style.color = "white";
            s.style.color = "#ffcc00";
            o.style.color = "white";
            document.body.style.background = "#1E4D2B";
            i2.src = "JacobsthalA322942Black.jpg";
        }
        else {
            now = "1";
            for (var i = 0; i < f.length; i++) {
                f[i].style.color = "brown";
            }
            m.style.background = "white";
            s.style.background = "white";
            m.style.color = "black";
            s.style.color = "black";
            o.style.color = "blue";
            document.body.style.background = "white";
            i2.src = "JacobsthalA322942White.jpg";
        }
    };
</script>
</head>
<body style="background-color: #1E4D2B;" >
<div class="main" id="start" style="background-color: #1E4D2B;" >
<button class='button' id="symbol" onclick='toggleStyle()'>
<span style="visibility: visible; display: inline-block; clear: both; font-size: 40px; line-height: 1; white-space: nowrap; position: relative; padding: 0px; margin: 0px; left: 3%; top: 0px;">&#9775;</span>
</button>

<h1 style="font-weight:bolder">Integer Triangle Transformations</span><br><span style="color:blue">A Python <br>Implementation</span><br>
Part I:<br>Tabl Generators</h1>

<h2 style="margin-top: 2em; font-weight:bolder;">
THE BINOMIAL COEFFICIENTS</h2>
<p>
Number of subsets with k elements of a set with n elements.
</p>

<h2>The user interface</h2>
<pre class="srccode">
binomial(n, k = None)
&nbsp;&nbsp;&nbsp;&nbsp;'n' and 'k' are integers.
&nbsp;&nbsp;&nbsp;&nbsp;'k = None' means that the parameter k is optional.
</pre>
<p>
ðŸ”¶ binomial(n) gives the n-th row of the triangel.
</p>
<p style="color:darkorange">
binomial(6) = [1, 6, 15, 20, 15, 6, 1].
</p>
<p>
ðŸ”¶ binomial(n, k) gives the k-th element in the n-th row the triangle.</p>
<p style="color:darkorange">binomial(6, 4) = 15.
</p>
<p>
ðŸ”¶ binomial(-n) returns the triangle as a list of the first n rows.</p>
<p style="color:darkorange">binomial(-6) = <br>
&nbsp;&nbsp;&nbsp;&nbsp;[[1], <br>
&nbsp;&nbsp;&nbsp;&nbsp;[1, 1], <br>
&nbsp;&nbsp;&nbsp;&nbsp;[1, 2, 1], <br>
&nbsp;&nbsp;&nbsp;&nbsp;[1, 3, 3, 1], <br>
&nbsp;&nbsp;&nbsp;&nbsp;[1, 4, 6, 4, 1], <br>
&nbsp;&nbsp;&nbsp;&nbsp;[1, 5, 10, 10, 5, 1]]
</p>

<p>ðŸ”¶ Note: The returned type is either term, row or triangle. 
All tabls are (0,0)-based, i.e. the index of the first row in a tabl is 0 and the index of the first term in a row is 0.</p>
<lu><li style="color:darkorange">Term:   binomial(0,0) = 1</li>
<li style="color:darkorange">First row:&nbsp;  binomial(0) = [1]</li>
<li style="color:darkorange">Tabl with one row:&nbsp; binomial(-1) = [[1]]</li>
</lu>

<h2 style="margin-top: 2em; font-weight:bolder;">
Example use</h2>
<pre>
from tabl import binomial

print("binomial(1000, 500) =") 
print( binomial(1000, 500))
</pre>

<p>The module also provides a number of utility functions which allow to view the triangle in different representations (as a triangular or a rectangular array).</p>
<pre>
from tabl import binomial, PrintViews

# The second parameter controls the dimension of the table.
PrintViews(binomial, 8)  
</pre>


<h2>The implementation</h2>
<pre>
from functools import cache
 
@cache
def _b(n: int) -> list[int]:
    if n == 0: return [1]
    row = [1] + _b(n - 1)
    for k in range(1, n):
        row[k] += row[k + 1]
    return row

def binomial(n: int, k: int | None = None) 
        -> (list[list[int]] | list[int] | int):
    if n < 0: return [_b(k) for k in range(-n)]
    if k == None: return _b(n)
    return _b(n)[k]
</pre>

<h2>The type 'TablGenerator'</h2>
<p>
A function has type 'TablGenerator' if its signature is 
</p>
<pre class="emph" >
        Callable(int, int | None = None) 
            -> (int | list[int] | list[list[int]])
</pre>
<p>A test for a static type checker is for instance:</p>
<pre>
def isTablGenerator(T: Callable[[int, int | None], 
    int | list[int] | list[list[int]]]) -> int:
        return (isinstance(T, Callable)
        and isinstance(T(0), list)
        and isinstance(T(0, None), list)
        and isinstance(T(0, 0), int)
        and isinstance(T(0)[0], int)
        and isinstance(T(-1)[0], list)
        and isinstance(T(-1)[0][0], int))
</pre>

<h2>A quick test.</h2>
<pre>
if __name__ == "__main__":
    import timeit
    from sys import setrecursionlimit
    setrecursionlimit(2000)

    print(binomial(0))
    print(binomial(-1))
    print(binomial(-6))
    print(binomial(6))
    print(binomial(6, 4))
    print(binomial(0, 0))
    
    row = binomial(1000)
    print(row[500] == binomial(1000, 500))

    setup = "from __main__ import binomial"
    print(timeit.timeit("binomial(1000)", setup=setup))
</pre>

<!--
<h3 style="margin-top: 2em;"><a href="http://luschny.de/julia/triangles/TutorialTrianglesPart2.html"><span style="color:red;font-weight: bold;">Part 2 of the tutorial</a></span></h3> -->

<a href="#start" class='button' id="restart" onclick='toggleStyle()'>
<span style="visibility: visible; display: inline-block; clear: both; font-size: 40px; line-height: 1; white-space: nowrap; position: relative; padding: 0px; margin: 0px; left: 3%; top: 0px;">&#8635;</span></a>
<span style="display:block; height: 50px;"></span>
</div></body></html>
